# 交易结算页面美化 - 测试清单

## 快速验证步骤

### 1. 编译检查 ✅
```bash
cd stock_app_client
flutter analyze lib/screens/settlement_screen.dart
```
**预期结果**: 无语法错误，仅有少量警告（未使用的变量/方法）

---

### 2. 视觉检查项目

#### 2.1 顶部信息卡片
- [ ] 股票名称和代码显示在蓝色渐变背景的卡片中
- [ ] 左侧有K线图标，带圆角背景
- [ ] 股票名称：20号字体，加粗
- [ ] 股票代码：13号字体，灰色
- [ ] **重要**: 点击股票名称不会弹出任何窗口（HTML走势图已删除）

#### 2.2 交易类型标签
- [ ] 买入：红色渐变背景，向上箭头图标
- [ ] 卖出：绿色渐变背景，向下箭头图标
- [ ] 图标有独立的圆角背景容器
- [ ] 有柔和的阴影效果

#### 2.3 关键指标卡片
- [ ] 三个指标卡片横向排列
- [ ] 每个卡片有渐变背景（蓝色/紫色/橙色等）
- [ ] 图标在顶部，带圆角背景
- [ ] 标签文字：11号字体
- [ ] 数值文字：15号字体，加粗

#### 2.4 K线图表区域
- [ ] 标题栏有蓝色渐变背景
- [ ] 左侧K线图标，带渐变背景和阴影
- [ ] 标题："K线走势图"，17号字体
- [ ] 副标题：显示数据天数，14号字体
- [ ] 图表正常显示，可以交互

#### 2.5 结算表单区域
- [ ] 整个表单容器有渐变背景
- [ ] 24px大圆角
- [ ] 表单标题有独立的蓝色渐变背景卡片
- [ ] 钱包图标，带渐变背景
- [ ] 双行标题：主标题+副标题
- [ ] 所有输入框正常显示

---

### 3. 深色/浅色模式测试

#### 3.1 切换到深色模式
```dart
// 在系统设置中切换到深色模式
// 或在app中切换主题
```

**检查项目**:
- [ ] 所有背景色变为深灰色调
- [ ] 文字变为白色/浅灰色
- [ ] 渐变效果正常
- [ ] 边框颜色适配
- [ ] 阴影效果可见
- [ ] 对比度足够，文字清晰可读

#### 3.2 切换到浅色模式
**检查项目**:
- [ ] 所有背景色变为浅色调
- [ ] 文字变为深色
- [ ] 渐变效果正常
- [ ] 边框颜色适配
- [ ] 阴影效果可见
- [ ] 对比度足够，文字清晰可读

---

### 4. 功能测试

#### 4.1 HTML走势图删除验证
- [ ] 点击股票名称区域 → **无反应**（正确）
- [ ] 不会弹出任何对话框
- [ ] 不会有任何导航跳转

#### 4.2 数据显示
- [ ] 股票名称正确显示
- [ ] 股票代码正确显示
- [ ] 交易类型（买入/卖出）正确显示
- [ ] 计划价格正确显示
- [ ] 计划数量正确显示
- [ ] 盈亏比/净盈亏正确显示

#### 4.3 K线图交互
- [ ] 可以点击K线图上的点
- [ ] 显示详细数据
- [ ] 图表缩放正常
- [ ] 滚动流畅

#### 4.4 表单功能
- [ ] 可以输入实际成交价格
- [ ] 可以输入实际成交数量
- [ ] 可以输入佣金
- [ ] 可以输入税费
- [ ] 可以输入备注
- [ ] 表单验证正常
- [ ] 提交功能正常

---

### 5. 响应式测试

#### 5.1 不同屏幕尺寸
- [ ] iPhone SE (小屏): 布局正常，无溢出
- [ ] iPhone 14 (中屏): 布局正常
- [ ] iPhone 14 Pro Max (大屏): 布局正常
- [ ] iPad (平板): 布局正常

#### 5.2 横屏测试
- [ ] 横屏模式下布局正常
- [ ] 所有内容可见
- [ ] 滚动流畅

---

### 6. 性能测试

#### 6.1 加载速度
- [ ] 页面打开速度 < 1秒
- [ ] K线数据加载提示正常
- [ ] 无明显卡顿

#### 6.2 滚动性能
- [ ] 上下滚动流畅（60fps）
- [ ] 无掉帧现象
- [ ] 渐变和阴影不影响性能

#### 6.3 内存占用
- [ ] 内存占用正常
- [ ] 无内存泄漏
- [ ] 退出页面后内存释放

---

### 7. 边界情况测试

#### 7.1 数据异常
- [ ] 无K线数据时显示正常
- [ ] K线数据加载失败时显示正常
- [ ] 重新加载按钮功能正常

#### 7.2 极端数值
- [ ] 价格为0时显示正常
- [ ] 价格很大时（如茅台2000+）显示正常
- [ ] 数量很大时显示正常
- [ ] 盈亏为负数时显示正常（红色）
- [ ] 盈亏为正数时显示正常（绿色）

---

### 8. 对比测试

#### 8.1 美化前后对比
**美化前**:
- 股票名称可点击，会弹出HTML走势图对话框
- 样式较为简单，缺少渐变和阴影
- 视觉层次不够分明

**美化后**:
- 股票名称不可点击，简化交互
- 专业的渐变背景和阴影效果
- 清晰的视觉层次和信息分组
- 符合金融app的专业风格

---

## 测试结果记录

### 测试环境
- 设备型号: _______________
- 系统版本: _______________
- Flutter版本: _______________
- 测试日期: _______________

### 发现的问题
1. _______________
2. _______________
3. _______________

### 通过的测试项
- 总测试项: _____ 项
- 通过: _____ 项
- 失败: _____ 项
- 通过率: _____ %

---

## 快速验证命令

```bash
# 1. 检查语法错误
cd stock_app_client
flutter analyze lib/screens/settlement_screen.dart

# 2. 运行app
flutter run

# 3. 热重载测试
# 在app运行时按 'r' 进行热重载
# 在app运行时按 'R' 进行热重启

# 4. 查看日志
flutter logs
```

---

## 验证通过标准

✅ **通过标准**:
1. 无语法错误
2. 深色/浅色模式都正常显示
3. 点击股票名称无反应（HTML走势图已删除）
4. 所有UI组件渐变和阴影效果正确
5. 表单功能正常
6. K线图交互正常
7. 性能流畅，无卡顿

❌ **不通过标准**:
1. 有语法错误导致编译失败
2. 深色或浅色模式显示异常
3. 点击股票名称仍会弹出对话框
4. UI组件显示错误或缺失
5. 表单无法提交
6. K线图无法显示
7. 明显的性能问题

---

## 注意事项

1. **删除HTML走势图功能是预期行为**，不是bug
2. 部分linter警告（未使用的方法）不影响功能，可以忽略
3. 如果发现渐变效果不明显，检查设备是否支持GPU渲染
4. 深色模式下的对比度可能因设备屏幕而异
5. 建议在真机上测试，模拟器可能无法完全展现渐变和阴影效果

---

## 回滚方案

如果发现重大问题需要回滚：

```bash
# 查看git历史
git log --oneline

# 回滚到上一个版本
git reset --hard <commit-hash>

# 或者使用git revert
git revert <commit-hash>
```

---

## 联系方式

如有问题，请联系开发团队。

