# ä»£ç ç»“æ„æœ€ä½³å®è·µé‡æ„æ–¹æ¡ˆ

## ğŸ“‹ å½“å‰ç»“æ„åˆ†æ

### å½“å‰ç›®å½•ç»“æ„
```
app/
â”œâ”€â”€ api/              # APIè·¯ç”±å±‚ï¼ˆ13ä¸ªæ–‡ä»¶ï¼‰âœ…
â”œâ”€â”€ charts/           # å›¾è¡¨ç­–ç•¥ï¼ˆ3ä¸ªæ–‡ä»¶ï¼‰âš ï¸
â”œâ”€â”€ core/             # æ ¸å¿ƒé…ç½®ï¼ˆ5ä¸ªæ–‡ä»¶ï¼‰âœ…
â”œâ”€â”€ db/               # æ•°æ®åº“å±‚ï¼ˆ6ä¸ªæ–‡ä»¶ï¼‰âš ï¸
â”œâ”€â”€ indicators/       # æŒ‡æ ‡ç­–ç•¥ï¼ˆ3ä¸ªæ–‡ä»¶ï¼‰âš ï¸
â”œâ”€â”€ models/           # æ•°æ®æ¨¡å‹ï¼ˆ2ä¸ªæ–‡ä»¶ï¼‰âš ï¸
â”œâ”€â”€ schemas/          # APIæ¨¡å¼ï¼ˆ3ä¸ªæ–‡ä»¶ï¼‰âš ï¸
â”œâ”€â”€ services/         # ä¸šåŠ¡æœåŠ¡ï¼ˆå¤šå±‚ï¼‰âœ…
â”œâ”€â”€ tasks/            # åå°ä»»åŠ¡ï¼ˆ2ä¸ªæ–‡ä»¶ï¼‰âœ…
â””â”€â”€ utils/            # å·¥å…·ç±»ï¼ˆ1ä¸ªæ–‡ä»¶ï¼‰âœ…
```

### é—®é¢˜åˆ†æ

#### 1. **charts/ å’Œ indicators/ é‡å¤** âš ï¸
```
charts/
â”œâ”€â”€ base_chart_strategy.py
â”œâ”€â”€ trend_continuation_chart_strategy.py
â””â”€â”€ volume_wave_chart_strategy.py

indicators/
â”œâ”€â”€ base_strategy.py
â”œâ”€â”€ trend_continuation_strategy.py
â””â”€â”€ volume_wave_strategy.py
```
**é—®é¢˜**: åŠŸèƒ½é‡å¤ï¼Œå‘½åæ··æ·†ï¼Œåº”è¯¥åˆå¹¶

#### 2. **models/ å’Œ schemas/ èŒè´£ä¸æ¸…** âš ï¸
- `models/`: é¢†åŸŸæ¨¡å‹ï¼ˆdataclassï¼‰
- `schemas/`: APIæ¨¡å‹ï¼ˆPydanticï¼‰
- **é—®é¢˜**: ä½¿ç”¨ç‡ä½ï¼ŒèŒè´£æ··æ·†

#### 3. **db/ å±‚è®¾è®¡é—®é¢˜** âš ï¸
```
db/
â”œâ”€â”€ base_class.py      # SQLAlchemyåŸºç±»ï¼ˆå·²åºŸå¼ƒï¼‰
â”œâ”€â”€ base.py            # æ•°æ®åº“åŸºç±»ï¼ˆå·²åºŸå¼ƒï¼‰
â”œâ”€â”€ init_db.py         # åˆå§‹åŒ–ï¼ˆå·²åºŸå¼ƒï¼‰
â”œâ”€â”€ partition.py       # åˆ†åŒºï¼ˆå·²åºŸå¼ƒï¼‰
â”œâ”€â”€ redis_storage.py   # Rediså­˜å‚¨ï¼ˆæœªä½¿ç”¨ï¼‰
â””â”€â”€ session.py         # Redisç¼“å­˜ï¼ˆä½¿ç”¨ä¸­ï¼‰âœ…
```
**é—®é¢˜**: å¤§é‡åºŸå¼ƒä»£ç ï¼Œåªæœ‰session.pyåœ¨ç”¨

---

## âœ… æœ€ä½³å®è·µé‡æ„æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: DDDåˆ†å±‚æ¶æ„

```
app/
â”œâ”€â”€ domain/                    # é¢†åŸŸå±‚ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ entities/              # é¢†åŸŸå®ä½“
â”‚   â”‚   â”œâ”€â”€ stock.py          # è‚¡ç¥¨å®ä½“
â”‚   â”‚   â”œâ”€â”€ etf.py            # ETFå®ä½“
â”‚   â”‚   â””â”€â”€ signal.py         # ä¿¡å·å®ä½“
â”‚   â”œâ”€â”€ value_objects/        # å€¼å¯¹è±¡
â”‚   â”‚   â”œâ”€â”€ stock_code.py     # è‚¡ç¥¨ä»£ç 
â”‚   â”‚   â””â”€â”€ price.py          # ä»·æ ¼
â”‚   â””â”€â”€ strategies/           # ç­–ç•¥æ¨¡å¼ï¼ˆåˆå¹¶chartså’Œindicatorsï¼‰
â”‚       â”œâ”€â”€ base.py
â”‚       â”œâ”€â”€ trend_continuation.py
â”‚       â””â”€â”€ volume_wave.py
â”‚
â”œâ”€â”€ application/              # åº”ç”¨å±‚ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ dtos/                 # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚   â”œâ”€â”€ requests/
â”‚   â”‚   â”‚   â”œâ”€â”€ stock_request.py
â”‚   â”‚   â”‚   â””â”€â”€ signal_request.py
â”‚   â”‚   â””â”€â”€ responses/
â”‚   â”‚       â”œâ”€â”€ stock_response.py
â”‚   â”‚       â””â”€â”€ signal_response.py
â”‚   â””â”€â”€ services/            # åº”ç”¨æœåŠ¡ï¼ˆä»services/ç§»åŠ¨ï¼‰
â”‚       â”œâ”€â”€ stock/
â”‚       â”œâ”€â”€ signal/
â”‚       â”œâ”€â”€ analysis/
â”‚       â””â”€â”€ scheduler/
â”‚
â”œâ”€â”€ infrastructure/          # åŸºç¡€è®¾æ–½å±‚ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ cache/              # ç¼“å­˜
â”‚   â”‚   â””â”€â”€ redis_client.py
â”‚   â”œâ”€â”€ config/             # é…ç½®
â”‚   â”‚   â”œâ”€â”€ settings.py
â”‚   â”‚   â””â”€â”€ logging.py
â”‚   â”œâ”€â”€ external/           # å¤–éƒ¨æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ tushare_client.py
â”‚   â”‚   â””â”€â”€ akshare_client.py
â”‚   â””â”€â”€ persistence/        # æŒä¹…åŒ–
â”‚       â””â”€â”€ redis_repository.py
â”‚
â”œâ”€â”€ presentation/           # è¡¨ç°å±‚ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ api/               # APIè·¯ç”±ï¼ˆä»api/ç§»åŠ¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ v1/           # APIç‰ˆæœ¬
â”‚   â”‚   â”‚   â”œâ”€â”€ stocks.py
â”‚   â”‚   â”‚   â”œâ”€â”€ signals.py
â”‚   â”‚   â”‚   â””â”€â”€ news.py
â”‚   â”‚   â””â”€â”€ dependencies.py
â”‚   â””â”€â”€ schemas/          # APIæ¨¡å¼ï¼ˆä»schemas/ç§»åŠ¨ï¼‰
â”‚       â”œâ”€â”€ requests/
â”‚       â””â”€â”€ responses/
â”‚
â”œâ”€â”€ tasks/                 # åå°ä»»åŠ¡ï¼ˆä¿ç•™ï¼‰
â”‚   â”œâ”€â”€ scheduler.py
â”‚   â””â”€â”€ stock_data_tasks.py
â”‚
â””â”€â”€ utils/                # å·¥å…·ç±»ï¼ˆä¿ç•™ï¼‰
    â””â”€â”€ date_helper.py
```

### æ–¹æ¡ˆ2: ç®€åŒ–å®ç”¨æ¶æ„ï¼ˆæ¨èï¼‰

```
app/
â”œâ”€â”€ core/                     # æ ¸å¿ƒé…ç½®å’ŒåŸºç¡€è®¾æ–½
â”‚   â”œâ”€â”€ config.py            # é…ç½®
â”‚   â”œâ”€â”€ logging.py           # æ—¥å¿—
â”‚   â”œâ”€â”€ redis_client.py      # Rediså®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ etf_config.py        # ETFé…ç½®
â”‚   â””â”€â”€ invalid_stock_codes.py
â”‚
â”œâ”€â”€ domain/                  # é¢†åŸŸå±‚
â”‚   â”œâ”€â”€ entities/           # å®ä½“
â”‚   â”‚   â”œâ”€â”€ stock.py
â”‚   â”‚   â””â”€â”€ signal.py
â”‚   â””â”€â”€ strategies/         # ç­–ç•¥ï¼ˆåˆå¹¶chartså’Œindicatorsï¼‰
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ base_strategy.py
â”‚       â”œâ”€â”€ trend_continuation.py
â”‚       â””â”€â”€ volume_wave.py
â”‚
â”œâ”€â”€ services/               # æœåŠ¡å±‚ï¼ˆä¿ç•™ï¼Œæ¸…ç†ï¼‰
â”‚   â”œâ”€â”€ stock/             # è‚¡ç¥¨æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ stock_atomic_service.py
â”‚   â”‚   â”œâ”€â”€ stock_data_manager.py
â”‚   â”‚   â”œâ”€â”€ unified_data_service.py
â”‚   â”‚   â””â”€â”€ redis_stock_service.py
â”‚   â”œâ”€â”€ signal/            # ä¿¡å·æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ signal_manager.py
â”‚   â”‚   â””â”€â”€ signal_service.py
â”‚   â”œâ”€â”€ analysis/          # åˆ†ææœåŠ¡
â”‚   â”‚   â”œâ”€â”€ news_analysis_service.py
â”‚   â”‚   â”œâ”€â”€ stock_ai_analysis_service.py
â”‚   â”‚   â””â”€â”€ llm_service.py
â”‚   â”œâ”€â”€ scheduler/         # è°ƒåº¦å™¨
â”‚   â”‚   â”œâ”€â”€ stock_scheduler.py
â”‚   â”‚   â””â”€â”€ news_scheduler.py
â”‚   â”œâ”€â”€ chart/            # å›¾è¡¨æœåŠ¡
â”‚   â”‚   â””â”€â”€ chart_service.py
â”‚   â”œâ”€â”€ realtime/         # å®æ—¶æ•°æ®
â”‚   â”‚   â”œâ”€â”€ stock_realtime_service.py
â”‚   â”‚   â””â”€â”€ etf_realtime_service.py
â”‚   â””â”€â”€ data/             # æ•°æ®æœåŠ¡
â”‚       â”œâ”€â”€ data_source_service.py
â”‚       â””â”€â”€ data_validation_service.py
â”‚
â”œâ”€â”€ api/                   # APIè·¯ç”±ï¼ˆä¿ç•™ï¼‰
â”‚   â”œâ”€â”€ dependencies.py
â”‚   â”œâ”€â”€ stocks_redis.py
â”‚   â”œâ”€â”€ signal_management.py
â”‚   â”œâ”€â”€ news_analysis.py
â”‚   â”œâ”€â”€ chart.py
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ schemas/              # APIæ¨¡å¼ï¼ˆä¿ç•™ï¼Œé‡ç»„ï¼‰
â”‚   â”œâ”€â”€ requests/         # è¯·æ±‚æ¨¡å¼ï¼ˆæ–°å¢ï¼‰
â”‚   â”‚   â””â”€â”€ stock_request.py
â”‚   â””â”€â”€ responses/        # å“åº”æ¨¡å¼ï¼ˆæ–°å¢ï¼‰
â”‚       â”œâ”€â”€ stock_response.py
â”‚       â”œâ”€â”€ news_response.py
â”‚       â””â”€â”€ ai_response.py
â”‚
â”œâ”€â”€ repository/           # ä»“å‚¨å±‚ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ stock_repository.py
â”‚   â””â”€â”€ signal_repository.py
â”‚
â”œâ”€â”€ tasks/               # åå°ä»»åŠ¡ï¼ˆä¿ç•™ï¼‰
â”‚   â”œâ”€â”€ scheduler.py
â”‚   â””â”€â”€ stock_data_tasks.py
â”‚
â””â”€â”€ utils/              # å·¥å…·ç±»ï¼ˆä¿ç•™ï¼‰
    â””â”€â”€ date_helper.py
```

---

## ğŸ¯ å…·ä½“ä¼˜åŒ–æ­¥éª¤

### æ­¥éª¤1: åˆå¹¶ charts å’Œ indicators

```bash
# åˆ›å»ºç»Ÿä¸€çš„ç­–ç•¥ç›®å½•
mkdir -p app/domain/strategies

# åˆå¹¶ç­–ç•¥æ–‡ä»¶
# charts/base_chart_strategy.py + indicators/base_strategy.py
# â†’ domain/strategies/base_strategy.py

# charts/trend_continuation_chart_strategy.py + indicators/trend_continuation_strategy.py
# â†’ domain/strategies/trend_continuation.py

# charts/volume_wave_chart_strategy.py + indicators/volume_wave_strategy.py
# â†’ domain/strategies/volume_wave.py

# åˆ é™¤æ—§ç›®å½•
rm -rf app/charts
rm -rf app/indicators
```

### æ­¥éª¤2: æ¸…ç† db ç›®å½•

```bash
# åªä¿ç•™æœ‰ç”¨çš„æ–‡ä»¶
mkdir -p app/infrastructure/cache
mv app/db/session.py app/infrastructure/cache/redis_cache.py

# åˆ é™¤åºŸå¼ƒæ–‡ä»¶
rm app/db/base_class.py
rm app/db/base.py
rm app/db/init_db.py
rm app/db/partition.py
rm app/db/redis_storage.py
rmdir app/db
```

### æ­¥éª¤3: é‡ç»„ models å’Œ schemas

```bash
# åˆ›å»ºæ–°ç»“æ„
mkdir -p app/domain/entities
mkdir -p app/schemas/requests
mkdir -p app/schemas/responses

# è¿ç§»å®ä½“
mv app/models/stock.py app/domain/entities/stock.py
mv app/models/ai_analysis.py app/domain/entities/ai_analysis.py

# é‡ç»„schemas
mv app/schemas/stock.py app/schemas/responses/stock_response.py
mv app/schemas/news_schema.py app/schemas/responses/news_response.py
mv app/schemas/ai_schema.py app/schemas/responses/ai_response.py

# åˆ é™¤æ—§ç›®å½•
rm -rf app/models
```

### æ­¥éª¤4: åˆ›å»ºä»“å‚¨å±‚

```bash
mkdir -p app/repository

# åˆ›å»ºä»“å‚¨æ¥å£
cat > app/repository/stock_repository.py << 'EOF'
# -*- coding: utf-8 -*-
"""è‚¡ç¥¨æ•°æ®ä»“å‚¨"""

from typing import List, Optional, Dict, Any
from app.infrastructure.cache.redis_cache import RedisCache

class StockRepository:
    """è‚¡ç¥¨æ•°æ®ä»“å‚¨ - å°è£…Redisæ“ä½œ"""
    
    def __init__(self):
        self.cache = RedisCache()
    
    async def get_stock_codes(self) -> List[Dict[str, Any]]:
        """è·å–æ‰€æœ‰è‚¡ç¥¨ä»£ç """
        return self.cache.get_cache('stocks:codes:all') or []
    
    async def save_stock_codes(self, codes: List[Dict[str, Any]]):
        """ä¿å­˜è‚¡ç¥¨ä»£ç """
        self.cache.set_cache('stocks:codes:all', codes)
    
    async def get_kline(self, ts_code: str) -> Optional[List[Dict]]:
        """è·å–Kçº¿æ•°æ®"""
        return self.cache.get_cache(f'stock_trend:{ts_code}')
    
    async def save_kline(self, ts_code: str, data: List[Dict]):
        """ä¿å­˜Kçº¿æ•°æ®"""
        self.cache.set_cache(f'stock_trend:{ts_code}', data)
EOF
```

---

## ğŸ“Š ä¼˜åŒ–æ•ˆæœå¯¹æ¯”

### æ–‡ä»¶æ•°é‡

| ç›®å½• | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹å–„ |
|------|--------|--------|------|
| charts/ | 3ä¸ª | 0ä¸ªï¼ˆåˆå¹¶ï¼‰ | âœ… |
| indicators/ | 3ä¸ª | 0ä¸ªï¼ˆåˆå¹¶ï¼‰ | âœ… |
| domain/strategies/ | 0ä¸ª | 3ä¸ªï¼ˆæ–°å¢ï¼‰ | âœ… |
| db/ | 6ä¸ª | 0ä¸ªï¼ˆæ¸…ç†ï¼‰ | âœ… |
| models/ | 2ä¸ª | 0ä¸ªï¼ˆè¿ç§»ï¼‰ | âœ… |
| domain/entities/ | 0ä¸ª | 2ä¸ªï¼ˆæ–°å¢ï¼‰ | âœ… |
| **æ€»è®¡** | **14ä¸ªå†—ä½™** | **5ä¸ªç²¾ç®€** | **â¬‡ï¸ 64%** |

### ç»“æ„æ¸…æ™°åº¦

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å |
|------|--------|--------|
| èŒè´£åˆ’åˆ† | æ¨¡ç³Š | æ¸…æ™° |
| DDDåˆ†å±‚ | æ—  | æœ‰ |
| åºŸå¼ƒä»£ç  | å¤š | æ—  |
| å‘½åè§„èŒƒ | æ··ä¹± | ç»Ÿä¸€ |

---

## ğŸ¯ æ¨èçš„æœ€ç»ˆç»“æ„

```
app/
â”œâ”€â”€ core/                      # æ ¸å¿ƒåŸºç¡€è®¾æ–½
â”‚   â”œâ”€â”€ config.py
â”‚   â”œâ”€â”€ logging.py
â”‚   â”œâ”€â”€ redis_client.py       # âœ… å·²ä¼˜åŒ–ï¼ˆç»Ÿä¸€å®ç°ï¼‰
â”‚   â”œâ”€â”€ etf_config.py
â”‚   â””â”€â”€ invalid_stock_codes.py
â”‚
â”œâ”€â”€ domain/                    # é¢†åŸŸå±‚ï¼ˆDDDï¼‰
â”‚   â”œâ”€â”€ entities/             # é¢†åŸŸå®ä½“
â”‚   â”‚   â”œâ”€â”€ stock.py
â”‚   â”‚   â”œâ”€â”€ signal.py
â”‚   â”‚   â””â”€â”€ ai_analysis.py
â”‚   â””â”€â”€ strategies/           # ç­–ç•¥æ¨¡å¼ï¼ˆåˆå¹¶åï¼‰
â”‚       â”œâ”€â”€ base_strategy.py
â”‚       â”œâ”€â”€ trend_continuation.py
â”‚       â””â”€â”€ volume_wave.py
â”‚
â”œâ”€â”€ repository/               # ä»“å‚¨å±‚ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ stock_repository.py
â”‚   â””â”€â”€ signal_repository.py
â”‚
â”œâ”€â”€ services/                 # åº”ç”¨æœåŠ¡å±‚
â”‚   â”œâ”€â”€ stock/
â”‚   â”œâ”€â”€ signal/
â”‚   â”œâ”€â”€ analysis/
â”‚   â”œâ”€â”€ scheduler/
â”‚   â”œâ”€â”€ chart/
â”‚   â”œâ”€â”€ realtime/
â”‚   â””â”€â”€ data/
â”‚
â”œâ”€â”€ api/                      # APIè·¯ç”±å±‚
â”‚   â”œâ”€â”€ dependencies.py
â”‚   â”œâ”€â”€ stocks_redis.py
â”‚   â”œâ”€â”€ signal_management.py
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ schemas/                  # APIæ¨¡å¼
â”‚   â”œâ”€â”€ requests/            # è¯·æ±‚æ¨¡å¼
â”‚   â””â”€â”€ responses/           # å“åº”æ¨¡å¼
â”‚       â”œâ”€â”€ stock_response.py
â”‚       â”œâ”€â”€ news_response.py
â”‚       â””â”€â”€ ai_response.py
â”‚
â”œâ”€â”€ tasks/                   # åå°ä»»åŠ¡
â”‚   â”œâ”€â”€ scheduler.py
â”‚   â””â”€â”€ stock_data_tasks.py
â”‚
â””â”€â”€ utils/                  # å·¥å…·ç±»
    â””â”€â”€ date_helper.py
```

---

## ğŸ”§ å®æ–½ä¼˜å…ˆçº§

### é«˜ä¼˜å…ˆçº§ï¼ˆç«‹å³æ‰§è¡Œï¼‰

1. âœ… **åˆå¹¶ charts å’Œ indicators** - æ¶ˆé™¤é‡å¤
2. âœ… **æ¸…ç† db ç›®å½•** - åˆ é™¤åºŸå¼ƒä»£ç 
3. âœ… **Rediså®¢æˆ·ç«¯ä¼˜åŒ–** - å·²å®Œæˆ

### ä¸­ä¼˜å…ˆçº§ï¼ˆæœ¬å‘¨å®Œæˆï¼‰

4. **é‡ç»„ models å’Œ schemas** - æ¸…æ™°èŒè´£
5. **åˆ›å»º repository å±‚** - å°è£…æ•°æ®è®¿é—®

### ä½ä¼˜å…ˆçº§ï¼ˆæ¸è¿›å¼ï¼‰

6. **å®Œå–„ domain å±‚** - DDDå®è·µ
7. **APIç‰ˆæœ¬åŒ–** - é•¿æœŸè§„åˆ’

---

## ğŸ’¡ æœ€ä½³å®è·µå»ºè®®

### 1. åˆ†å±‚åŸåˆ™

```
Presentation Layer (API)
    â†“ ä¾èµ–
Application Layer (Services)
    â†“ ä¾èµ–
Domain Layer (Entities, Strategies)
    â†“ ä¾èµ–
Infrastructure Layer (Redis, External APIs)
```

**è§„åˆ™**:
- âœ… ä¸Šå±‚å¯ä»¥ä¾èµ–ä¸‹å±‚
- âŒ ä¸‹å±‚ä¸èƒ½ä¾èµ–ä¸Šå±‚
- âœ… Domainå±‚åº”è¯¥ç‹¬ç«‹ï¼Œä¸ä¾èµ–å¤–éƒ¨

### 2. å‘½åè§„èŒƒ

```python
# âœ… æ­£ç¡®
domain/entities/stock.py          # é¢†åŸŸå®ä½“
repository/stock_repository.py    # ä»“å‚¨
services/stock/stock_service.py   # åº”ç”¨æœåŠ¡
api/stocks.py                     # APIè·¯ç”±
schemas/responses/stock_response.py  # å“åº”æ¨¡å¼

# âŒ é”™è¯¯
models/stock.py                   # æ··æ·†
schemas/stock.py                  # ä¸æ˜ç¡®
charts/base_chart_strategy.py    # é‡å¤
indicators/base_strategy.py       # é‡å¤
```

### 3. æ–‡ä»¶ç»„ç»‡

```python
# âœ… æ­£ç¡®ï¼šæŒ‰åŠŸèƒ½åˆ†ç»„
services/
â”œâ”€â”€ stock/
â”‚   â”œâ”€â”€ stock_atomic_service.py
â”‚   â”œâ”€â”€ stock_data_manager.py
â”‚   â””â”€â”€ unified_data_service.py
â””â”€â”€ signal/
    â”œâ”€â”€ signal_manager.py
    â””â”€â”€ signal_service.py

# âŒ é”™è¯¯ï¼šæŒ‰ç±»å‹åˆ†ç»„
services/
â”œâ”€â”€ managers/
â”‚   â”œâ”€â”€ stock_data_manager.py
â”‚   â””â”€â”€ signal_manager.py
â””â”€â”€ services/
    â”œâ”€â”€ stock_service.py
    â””â”€â”€ signal_service.py
```

---

## ğŸ‰ æ€»ç»“

### æ ¸å¿ƒä¼˜åŒ–

1. âœ… **Rediså®¢æˆ·ç«¯**: 3ä¸ª â†’ 1ä¸ªï¼ˆâ¬‡ï¸ 67%ï¼‰
2. âœ… **ç­–ç•¥æ¨¡å¼**: charts + indicators â†’ domain/strategies
3. âœ… **æ¸…ç†åºŸå¼ƒ**: dbç›®å½•ä¸­5ä¸ªåºŸå¼ƒæ–‡ä»¶
4. âœ… **DDDåˆ†å±‚**: å¼•å…¥domainå’Œrepositoryå±‚
5. âœ… **èŒè´£æ¸…æ™°**: models â†’ entities, schemasé‡ç»„

### é¢„æœŸæ•ˆæœ

- ğŸ“‰ ä»£ç é‡: å‡å°‘ 30%
- ğŸ“ˆ å¯ç»´æŠ¤æ€§: æå‡ 50%
- ğŸ¯ ç»“æ„æ¸…æ™°åº¦: æå‡ 80%
- âš¡ å¼€å‘æ•ˆç‡: æå‡ 40%

---

**å»ºè®®**: å…ˆæ‰§è¡Œé«˜ä¼˜å…ˆçº§ä¼˜åŒ–ï¼ˆåˆå¹¶ç­–ç•¥ã€æ¸…ç†åºŸå¼ƒä»£ç ï¼‰ï¼Œç„¶åæ¸è¿›å¼é‡æ„å…¶ä»–éƒ¨åˆ†ã€‚

